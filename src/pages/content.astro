---
// Client-side script imports need to go in a client:* directive
import { useState } from "react";
import PhotoGrid from "../components/PhotoGrid.astro";
import MainLayout from "@/layouts/MainLayout.astro";

const cards = [
  {
    title: "Wildlife Photography",
    desc: "Discover the art of capturing wild animals in their natural habitat.",
    img: "https://iso.500px.com/wp-content/uploads/2015/02/5ds_cover-1500x1000.jpg",
  },
  {
    title: "Portrait Mastery",
    desc: "Learn professional techniques for stunning portrait photography.",
    img: "https://iso.500px.com/wp-content/uploads/2015/02/5ds_cover-1500x1000.jpg",
  },
  {
    title: "Landscape Magic",
    desc: "Tips and tricks for capturing breathtaking landscape photos.",
    img: "https://iso.500px.com/wp-content/uploads/2015/02/5ds_cover-1500x1000.jpg",
  },
  {
    title: "Street Photography",
    desc: "Master the art of capturing life in urban environments.",
    img: "https://iso.500px.com/wp-content/uploads/2015/02/5ds_cover-1500x1000.jpg",
  },
  {
    title: "Night Photography",
    desc: "Learn to capture stunning images in low-light conditions.",
    img: "https://iso.500px.com/wp-content/uploads/2015/02/5ds_cover-1500x1000.jpg",
  },
  {
    title: "Macro Photography",
    desc: "Explore the tiny world through your camera lens.",
    img: "https://iso.500px.com/wp-content/uploads/2015/02/5ds_cover-1500x1000.jpg",
  },
];

// Move the React component to a separate .jsx/.tsx file
---

<MainLayout title="Photography Content">
  <div>
    <header class="hero-section">
      <div class="hero-content">
        <h2 class="text-4xl font-bold">Welcome to Photography Content</h2>
        <p class="mt-2 text-lg">Building modern and fast web experiences</p>
      </div>
    </header>

    <PhotoGrid cards={cards} />
    <p id="no-results" class="hidden text-center py-8 text-xl text-gray-600 font-medium bg-gray-50 rounded-lg mx-4 my-6 shadow-inner">
      <span class="block text-3xl mb-2">üîç</span>
      No matching results found
    </p>
  </div>
</MainLayout>

<style>
  .hero-section {
    @apply bg-cover bg-center py-16 text-center text-white;
    background-image: url("https://dfstudio-d420.kxcdn.com/wordpress/wp-content/uploads/2019/06/digital_camera_photo-1080x675.jpg");
  }

  .hero-content {
    @apply bg-black bg-opacity-50 px-4 py-16;
  }
</style>

<script>
  // Client-side search functionality
  const searchInput = document.getElementById("search");
  const cards = document.querySelectorAll(".grid > div");
  const noResults = document.getElementById("no-results");

  searchInput?.addEventListener("input", (e) => {
    const searchTerm = (e.target as HTMLInputElement).value.toLowerCase();
    let hasVisibleCards = false;

    cards.forEach((card) => {
      const title = card.querySelector("h3")?.textContent?.toLowerCase() || "";
      const desc = card.querySelector("p")?.textContent?.toLowerCase() || "";

      if (title.includes(searchTerm) || desc.includes(searchTerm)) {
        card.classList.remove("hidden");
        hasVisibleCards = true;
      } else {
        card.classList.add("hidden");
      }
    });

    // Toggle no results message
    if (noResults) {
      noResults.classList.toggle("hidden", hasVisibleCards);
    }
  });
</script>
